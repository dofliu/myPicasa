# 變更日誌

本文件記錄 myPicasa 專案的所有重要變更。

## [6.2.0] - 2026-02-27

### 系統架構優化

- 將主程式入口點從 `picasa6.py` 重新命名整合為 `main.py`，作為系統標準進入點。

### 新增 🧹 硬碟清理功能 (WinDirStat-like)

- 導入了類似 WinDirStat 的樹狀分析介面 (`QTreeWidget`)。
- 專屬的背景掃描執行緒 (`QThread: DiskScanWorker`) 避免在分析鉅量快取時發生 UI 卡頓。
- 全新三大層級的深度掃描：
  - 常見快取：新增對 NPM, Python Pip, Discord, Slack, Chrome, Firefox, LINE 的支援。
  - 使用者資料夾深度分析：掃描 AppData 內超過 10MB 的肥大目錄。
  - 超大檔案偵測：全磁碟範圍內直接掃描超出 500MB 的怪獸檔案。

### 強化安全性與介面友善 (UX)

- 🗑️ 刪除操作安全性升級：採用 `send2trash` 取代原有的強制移除 (`shutil.rmtree`)，將檔案移進資源回收桶以免誤刪。
- 📊 動態硬碟資訊：在左上角選擇掃描磁區時，會即時顯示該磁碟的總容量、可用空間與使用百分比。
- 🖱️ 快捷路徑存取：樹狀結構不僅顯示完整檔案路徑，尚支援雙擊滑鼠直接開啟原生的 Windows 檔案總管。
- 🐛 修正大型磁碟空間統計時，導致數值 Integer Overflow (溢位變負數) 的嚴重 Bug。

## [6.1.0] - 2025-12-12

### 新增 🏷️ PDF 浮水印功能

- 在 `utils/doc_converter.py` 中新增 PDF 浮水印功能
  - `add_text_watermark_to_pdf()` - 添加文字浮水印
  - `add_image_watermark_to_pdf()` - 添加圖片浮水印
- 在 `picasa6.py` 中整合 PDF 浮水印分頁
  - 文字浮水印設定（文字內容、字體大小、旋轉角度）
  - 圖片浮水印設定（圖片選擇、縮放比例）
  - 5 種位置選擇：正中央、左上角、右上角、左下角、右下角
  - 透明度調整（10%-100%）
- 建立 `test_pdf_watermark.py` - PDF 浮水印測試腳本
- 建立 `PDF_WATERMARK_GUIDE.md` - 完整的使用指南文檔

### 功能特色

- ✨ 文字浮水印
  - 支援自訂文字內容
  - 可調整字體大小（10-200）
  - 支援旋轉角度（-180° 到 180°）
  - 自動偵測並使用系統中文字型
- ✨ 圖片浮水印
  - 支援 PNG、JPG、JPEG、BMP 格式
  - PNG 格式支援透明背景
  - 可調整縮放比例（5%-50%）
- ✨ 通用功能
  - 5 種位置選擇
  - 透明度可調（10%-100%）
  - 邊距調整（0-100 像素）
    - 預設 10px 邊距
    - 可設為 0-5px 實現完全貼邊效果
    - 適合製作母片底稿
  - 自動套用到所有頁面
  - 保持原始 PDF 品質

### 改進

- 更新 `README.md`
  - 新增 PDF 浮水印功能說明
  - 新增使用指南連結
  - 新增邊距調整說明
- 新增完整的使用範例和測試腳本
- 支援 Windows、Linux、macOS 多平台中文字型
- GUI 介面新增邊距調整控制項（SpinBox，範圍 0-100px）

## [2025.2.0] - 2025-10-21

### 新增 🎨 UI 美化版本

- 建立 `picasa4.py` - 現代化美化版主程式 ⭐
  - 深色/淺色主題即時切換
  - 圓角按鈕和卡片設計
  - Emoji 圖標增強視覺識別
  - 改善的間距和排版
  - 更大的預設視窗尺寸 (1000x700)
  - 更好的視覺層次結構
- 建立 `utils/modern_style.py` - 現代化 UI 樣式管理
  - `ModernStyle` 類別提供深色/淺色主題
  - 完整的 QSS 樣式表
  - 統一的配色方案
  - 卡片樣式支援
- 建立 `UI_DESIGN.md` - UI 設計說明文件
  - 詳細的設計理念說明
  - 配色方案文檔
  - 使用指南
  - 自訂樣式教學

### 改進

- 更新 `README.md`
  - 新增版本比較表
  - 新增 UI 相關的常見問題
  - 推薦使用 picasa4.py
- 更新 `utils/__init__.py`
  - 導出 `ModernStyle` 類別
- 改善使用者體驗
  - 所有對話框添加 Emoji 圖標
  - 狀態列訊息更加友善
  - 按鈕最小高度設定更舒適
  - 輸入框和下拉選單高度統一

### UI 特色

- 🌙 深色主題 - 適合夜間使用
- ☀️ 淺色主題 - 適合白天使用
- 🎨 現代化設計語言
- 📱 響應式按鈕效果
- 🎯 清晰的視覺層次
- ✨ 流暢的使用體驗

## [2025.1.0] - 2025-10-21

### 新增

- 建立 `requirements.txt` - 管理 Python 依賴套件
- 建立詳細的 `README.md` - 包含完整的使用說明和專案文件
- 新增單元測試框架
  - `tests/test_image_utils.py` - 圖片處理工具函數測試
  - `tests/test_video_merge.py` - 影片合併功能測試
  - `run_tests.py` - 測試執行腳本
- 建立 `utils` 模組
  - `utils/image_utils.py` - 提取圖片處理工具函數
  - `utils/config.py` - 集中管理應用程式配置
- 建立 `picasa3.py` - 改進版主程式
  - 使用獨立的工具模組
  - 改善的錯誤處理機制
  - 更好的程式碼組織和可維護性
  - 新增進度條顯示
  - 新增狀態列訊息
- 建立 `.gitignore` - 忽略不必要的檔案
- 建立 `CHANGELOG.md` - 記錄專案變更

### 改進

- 優化程式碼結構
  - 將工具函數從主程式中提取到獨立模組
  - 使用配置類別管理所有配置參數
  - 改善方法命名（使用蛇形命名法）
- 改善錯誤處理
  - 統一的錯誤訊息管理
  - 更詳細的錯誤回報
  - 更好的異常處理
- 改善使用者體驗
  - 新增狀態列顯示當前操作狀態
  - 新增進度條顯示影片處理進度
  - 更清晰的訊息提示
- 改善文檔
  - README 包含完整的安裝和使用說明
  - 程式碼註解更詳細
  - 新增常見問題解答

### 技術改進

- 模組化設計 - 更好的程式碼組織
- 配置管理 - 集中管理所有設定
- 單元測試 - 確保程式碼品質
- 錯誤處理 - 更健壯的錯誤處理機制
- 程式碼風格 - 遵循 PEP 8 規範

### 檔案結構

```
myPicasa/
├── picasa.py           # 原始版本
├── picasa2.py          # 分頁版本
├── picasa3.py          # 改進版本（新）
├── videoMerge.py       # 影片合併工具
├── 123.html            # 網頁版轉換器
├── utils/              # 工具模組（新）
│   ├── __init__.py
│   ├── image_utils.py
│   └── config.py
├── tests/              # 單元測試（新）
│   ├── __init__.py
│   ├── test_image_utils.py
│   └── test_video_merge.py
├── requirements.txt    # 依賴套件（新）
├── run_tests.py        # 測試執行腳本（新）
├── .gitignore          # Git 忽略檔案（新）
├── CHANGELOG.md        # 變更日誌（新）
└── README.md           # 專案說明（更新）
```

## [2025.0.0] - 初始版本

### 功能

- 圖片拼接功能
- GIF 動畫製作
- 影片合併功能
- 圖片格式轉換
- 分頁式使用者介面
